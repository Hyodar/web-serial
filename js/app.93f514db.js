(function(e){function t(t){for(var a,i,r=t[0],c=t[1],l=t[2],d=0,p=[];d<r.length;d++)i=r[d],Object.prototype.hasOwnProperty.call(s,i)&&s[i]&&p.push(s[i][0]),s[i]=0;for(a in c)Object.prototype.hasOwnProperty.call(c,a)&&(e[a]=c[a]);u&&u(t);while(p.length)p.shift()();return o.push.apply(o,l||[]),n()}function n(){for(var e,t=0;t<o.length;t++){for(var n=o[t],a=!0,r=1;r<n.length;r++){var c=n[r];0!==s[c]&&(a=!1)}a&&(o.splice(t--,1),e=i(i.s=n[0]))}return e}var a={},s={app:0},o=[];function i(t){if(a[t])return a[t].exports;var n=a[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,i),n.l=!0,n.exports}i.m=e,i.c=a,i.d=function(e,t,n){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},i.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)i.d(n,a,function(t){return e[t]}.bind(null,a));return n},i.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="/web-serial/";var r=window["webpackJsonp"]=window["webpackJsonp"]||[],c=r.push.bind(r);r.push=t,r=r.slice();for(var l=0;l<r.length;l++)t(r[l]);var u=c;o.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("56d7")},"034f":function(e,t,n){"use strict";var a=n("85ec"),s=n.n(a);s.a},"0d23":function(e,t,n){"use strict";var a=n("dd46"),s=n.n(a);s.a},1:function(e,t){},"145f":function(e,t,n){},"17d9":function(e,t,n){},"17fc":function(e,t,n){},"247f":function(e,t,n){"use strict";var a=n("145f"),s=n.n(a);s.a},4855:function(e,t,n){"use strict";var a=n("e9a3"),s=n.n(a);s.a},5258:function(e,t,n){"use strict";var a=n("17d9"),s=n.n(a);s.a},"545c":function(e,t,n){"use strict";var a=n("75a8"),s=n.n(a);s.a},"56d7":function(e,t,n){"use strict";n.r(t);n("e260"),n("e6cf"),n("cca6"),n("a79d");var a=n("2b0e"),s=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-app",{staticStyle:{"background-color":"#262626"},attrs:{dark:""}},[n("v-app-bar",{attrs:{app:""}},[n("ConfigurationMenu",{attrs:{scanBufferSize:e.userOptions.scanBufferSize,messageBufferSize:e.userOptions.messageBufferSize,decodeFrom:e.userOptions.decodeFrom,encodeTo:e.userOptions.encodeTo},on:{"update:scanBufferSize":function(t){return e.$set(e.userOptions,"scanBufferSize",t)},"update:scan-buffer-size":function(t){return e.$set(e.userOptions,"scanBufferSize",t)},"update:messageBufferSize":function(t){return e.$set(e.userOptions,"messageBufferSize",t)},"update:message-buffer-size":function(t){return e.$set(e.userOptions,"messageBufferSize",t)},"update:decodeFrom":function(t){return e.$set(e.userOptions,"decodeFrom",t)},"update:decode-from":function(t){return e.$set(e.userOptions,"decodeFrom",t)},"update:encodeTo":function(t){return e.$set(e.userOptions,"encodeTo",t)},"update:encode-to":function(t){return e.$set(e.userOptions,"encodeTo",t)}}}),n("v-spacer"),n("v-app-bar-nav-icon",{on:{click:function(t){return t.stopPropagation(),e.toggleDrawer(t)}}})],1),n("NavigationDrawer",{model:{value:e.drawer,callback:function(t){e.drawer=t},expression:"drawer"}},[n("SerialOptions",{staticStyle:{"padding-top":"0px"},attrs:{value:e.userOptions.serialConnection},on:{serialConnected:e.openSerial,serialDisconnected:e.closeSerial}}),n("LogModeOptions",{model:{value:e.userOptions.logMode,callback:function(t){e.$set(e.userOptions,"logMode",t)},expression:"userOptions.logMode"}}),n("DisplayModeOptions",{model:{value:e.userOptions.displayMode,callback:function(t){e.$set(e.userOptions,"displayMode",t)},expression:"userOptions.displayMode"}}),n("ExpressionList",{on:{snackbar:function(t){return e.setSnackbarMessage(t)}},model:{value:e.userOptions.expressions,callback:function(t){e.$set(e.userOptions,"expressions",t)},expression:"userOptions.expressions"}}),n("CommandList",{ref:"commandList",attrs:{scanBufferSize:e.userOptions.scanBufferSize},on:{sendCommand:e.sendCommand,snackbar:function(t){return e.setSnackbarMessage(t)}},model:{value:e.userOptions.commands,callback:function(t){e.$set(e.userOptions,"commands",t)},expression:"userOptions.commands"}})],1),n("v-main",[n("Snackbar",{ref:"snackbar"}),n("SerialChat",{ref:"chat",attrs:{logMode:e.userOptions.logMode,displayMode:e.userOptions.displayMode,expressions:e.userOptions.expressions,messageBufferSize:e.userOptions.messageBufferSize},on:{clear:e.onChatCleared}}),n("SerialInput",{on:{sendMessage:e.sendMessage}})],1)],1)},o=[],i=(n("99af"),n("4160"),n("d81d"),n("b0c0"),n("d3b7"),n("4d63"),n("ac1f"),n("25f0"),n("159b"),n("5530")),r=(n("96cf"),n("1da1")),c=n("4f25"),l=n.n(c),u=n("1940"),d=n.n(u),p=n("acf9"),f=n.n(p),m=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("NavigationDrawerRow",{attrs:{label:"Serial Connection"}},[n("v-col",{attrs:{cols:9}},[n("v-autocomplete",{attrs:{items:e.menus.baudrate.suggestions,label:"Baud Rate"},model:{value:e.value.serialOptions.baudrate,callback:function(t){e.$set(e.value.serialOptions,"baudrate",t)},expression:"value.serialOptions.baudrate"}})],1),n("v-col",{attrs:{cols:3}},[n("v-btn",{attrs:{text:""},on:{click:e.toggleSerialConnection}},[e._v(" "+e._s(e.serialConnectionButtonText)+" ")])],1),n("v-row",[n("v-expansion-panels",{attrs:{flat:""}},[n("v-expansion-panel",{staticClass:"transparent"},[n("v-expansion-panel-header",[n("span",{staticClass:"text-button",staticStyle:{"font-size":"0.75rem !important"}},[e._v(" Additional Options ")])]),n("v-expansion-panel-content",{staticClass:"grey darken-3"},[n("v-row",[n("v-col",[n("v-select",{attrs:{items:e.menus.parity.options,label:"Parity Type"},model:{value:e.value.serialOptions.parity,callback:function(t){e.$set(e.value.serialOptions,"parity",t)},expression:"value.serialOptions.parity"}})],1),n("v-col",[n("v-text-field",{attrs:{type:"number",rules:[function(e){return e>=0||"Must be positive or zero"}],label:"Buffer Size"},model:{value:e.value.serialOptions.buffersize,callback:function(t){e.$set(e.value.serialOptions,"buffersize",e._n(t))},expression:"value.serialOptions.buffersize"}})],1)],1),n("v-row",[n("v-col",[n("v-select",{attrs:{items:e.menus.databits.options,label:"Data Bits"},model:{value:e.value.serialOptions.databits,callback:function(t){e.$set(e.value.serialOptions,"databits",t)},expression:"value.serialOptions.databits"}})],1),n("v-col",[n("v-select",{attrs:{items:e.menus.stopbits.options,label:"Stop Bits"},model:{value:e.value.serialOptions.stopbits,callback:function(t){e.$set(e.value.serialOptions,"stopbits",t)},expression:"value.serialOptions.stopbits"}})],1)],1),n("HorizontalSelection",{staticClass:"mt-2",attrs:{multiple:"",dense:"",options:e.menus.flags.options,value:e.menus.flags.selected},on:{changedValue:function(t){e.menus.flags.selected=t}}})],1)],1)],1)],1)],1)},h=[],v=(n("4de4"),n("07ac"),n("5377"),function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-expansion-panel",{staticStyle:{"background-color":"transparent"}},[n("v-expansion-panel-header",{staticClass:"elevation-2",staticStyle:{"border-bottom":"1px solid #ffffff33"}},[n("span",{staticClass:"drag-handle grippy"}),n("v-row",{staticClass:"ma-1",attrs:{justify:"center"}},[e._t("header",[n("div",{staticClass:"text-button"},[e._v(e._s(e.label))])])],2)],1),n("v-expansion-panel-content",{staticClass:"navigation-drawer-row-content"},[n("v-row",{staticClass:"ma-3",attrs:{justify:"center",align:"center"}},[e._t("default")],2),n("v-divider")],1)],1)}),g=[],b={name:"NavigationDrawerRow",props:{label:String}},x=b,S=(n("6ba9"),n("8463"),n("2877")),C=n("6544"),w=n.n(C),y=n("ce7e"),k=n("cd55"),O=n("49e2"),E=n("c865"),_=n("0fd9"),V=Object(S["a"])(x,v,g,!1,null,"4df7c81c",null),T=V.exports;w()(V,{VDivider:y["a"],VExpansionPanel:k["a"],VExpansionPanelContent:O["a"],VExpansionPanelHeader:E["a"],VRow:_["a"]});var M=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-row",{class:[e.dense?"ma-0":"ma-3"],attrs:{justify:"center"}},e._l(e.options,(function(t){return n("v-btn",{key:t.val,class:[e.isOptionActive(t.val)?"grey darken-2":void 0,e.dense?"pa-1":void 0],attrs:{tile:""},on:{click:function(n){return e.changeValue(t.val)}}},[e._v(" "+e._s(t.name)+" ")])})),1)},$=[],B=(n("c975"),{name:"HorizontalSelection",data:function(){return{activeValue:null}},mounted:function(){this.activeValue=this.value},props:["options","value"],methods:{changeValue:function(e){if(this.multiple)return this.isOptionActive(e)?this.activeValue=this.activeValue.filter((function(t){return t!==e})):this.activeValue.push(e),void this.$emit("changedValue",this.activeValue);this.$emit("changedValue",e)},isOptionActive:function(e){return this.multiple?this.activeValue&&-1!==this.activeValue.indexOf(e):this.value===e}},computed:{multiple:function(){return void 0!==this.$attrs.multiple},dense:function(){return void 0!==this.$attrs.dense}}}),R=B,j=n("8336"),L=Object(S["a"])(R,M,$,!1,null,null,null),D=L.exports;w()(L,{VBtn:j["a"],VRow:_["a"]});var N={RTSCTS:"rtscts",XON:"xon",XOFF:"xoff",XANY:"xany"},I=N,F={name:"SerialOptions",components:{NavigationDrawerRow:T,HorizontalSelection:D},props:{value:Object},data:function(){return{menus:{baudrate:{suggestions:[115200,57600,38400,19200,9600,4800,2400,1800,1200,600,300,200,150,134,110,75,50]},databits:{options:[8,7,6,5]},stopbits:{options:[1,2]},parity:{options:["none","even","odd","mark","space"]},flags:{options:[{name:I.RTSCTS,val:I.RTSCTS},{name:I.XON,val:I.XON},{name:I.XOFF,val:I.XOFF},{name:I.XANY,val:I.XANY}],selected:[]}}}},computed:{serialConnectionButtonText:function(){return this.value.active?"Cancel":"Go!"}},watch:{value:function(){var e=this;this.menus.flags.selected=Object.values(I).filter((function(t){return e.value.serialOptions[t]}))},"menus.flags.selected":function(){var e=this;Object.values(I).forEach((function(t){e.value.serialOptions[t]=!1})),this.menus.flags.selected.forEach((function(t){e.value.serialOptions[t]=!0}))}},methods:{toggleSerialConnection:function(){this.value.active?this.$emit("serialDisconnected"):this.$emit("serialConnected")}}},A=F,z=n("c6a6"),P=n("62ad"),q=n("0393"),H=n("b974"),W=n("8654"),U=Object(S["a"])(A,m,h,!1,null,null,null),J=U.exports;w()(U,{VAutocomplete:z["a"],VBtn:j["a"],VCol:P["a"],VExpansionPanel:k["a"],VExpansionPanelContent:O["a"],VExpansionPanelHeader:E["a"],VExpansionPanels:q["a"],VRow:_["a"],VSelect:H["a"],VTextField:W["a"]});var G=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("NavigationDrawerRow",{attrs:{label:"Log Mode"}},[n("HorizontalSelection",{attrs:{options:e.options,value:e.value},on:{changedValue:function(t){return e.updateValue(t)}}})],1)},Y=[],X=(n("4fad"),{TERMINAL:0,CHAT:1}),K=X,Q={name:"LogModeOptions",components:{NavigationDrawerRow:T,HorizontalSelection:D},props:["value"],data:function(){return{options:Object.entries(K).map((function(e){return{name:e[0],val:e[1]}}))}},methods:{updateValue:function(e){this.$emit("input",e)}}},Z=Q,ee=Object(S["a"])(Z,G,Y,!1,null,null,null),te=ee.exports,ne=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("NavigationDrawerRow",{attrs:{label:"Display Mode"}},[n("HorizontalSelection",{attrs:{options:e.options,value:e.value},on:{changedValue:function(t){return e.updateValue(t)}}})],1)},ae=[],se={ASCII:0,HEX:1,BINARY:2},oe=se,ie={name:"DisplayModeOptions",components:{NavigationDrawerRow:T,HorizontalSelection:D},props:["value"],data:function(){return{options:Object.entries(oe).map((function(e){return{name:e[0],val:e[1]}}))}},methods:{updateValue:function(e){this.$emit("input",e)}}},re=ie,ce=Object(S["a"])(re,ne,ae,!1,null,null,null),le=ce.exports,ue=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("NavigationDrawerRow",{scopedSlots:e._u([{key:"header",fn:function(){return[n("InfoDialog",{attrs:{label:"Expressions"}},[n("p",[e._v(" The "),n("b",[e._v("expression")]),e._v("list is used for"),n("b",[e._v("expressions")]),e._v(" that you'd like to highlight, for example a network packet. ")]),n("p",[e._v(" You can specify those using traditional RegEx and then choose any highlight color - "),n("b",[e._v("it's as simple as that.")])]),n("p",[e._v(" However, note that the expressions are matched in the list order character per character, so if you want something to be matched with higher priority, it has to be on the top of the list. ")])]),n("v-spacer"),n("div",{staticClass:"text-button"},[e._v("Expressions")]),n("v-spacer")]},proxy:!0}])},[n("ExpressionEditor",{ref:"expressionEditor",on:{snackbar:function(t){return e.sendSnackbar(t)}}}),n("v-card",{staticClass:"grey darken-3 custom-scrollbar",staticStyle:{height:"240px",width:"100%","overflow-y":"scroll",resize:"vertical"}},[n("v-list",[n("v-list-item-group",[e._l(e.value,(function(t,a){return n("v-list-item",{key:a},[n("v-list-item-action",[n("v-checkbox",{attrs:{color:"grey darken-4"},model:{value:t.active,callback:function(n){e.$set(t,"active",n)},expression:"item.active"}})],1),n("v-list-item-content",{on:{click:function(n){return e.openExpressionEditor(t)}}},[n("v-list-item-title",{domProps:{textContent:e._s(t.name)}})],1),n("v-list-item-action",{staticStyle:{margin:"0px"}},[n("v-menu",{attrs:{top:"","nudge-bottom":"105","nudge-left":"16","close-on-content-click":!1},scopedSlots:e._u([{key:"activator",fn:function(a){var s=a.on;return[n("v-btn",e._g({staticClass:"pa-3",attrs:{icon:"",color:t.color}},s),[n("v-icon",{attrs:{large:""}},[e._v(" mdi-label ")])],1)]}}],null,!0),model:{value:t.colorEdit,callback:function(n){e.$set(t,"colorEdit",n)},expression:"item.colorEdit"}},[n("v-card",[n("v-card-text",{staticClass:"pa-0"},[n("v-color-picker",{attrs:{value:t.color,flat:""},on:{input:function(n){return e.updateColor(t,n)}}})],1)],1)],1)],1)],1)})),n("v-list-item",{staticClass:"ma-2"},[n("v-list-item-action"),n("v-list-item-content",{on:{click:function(t){return t.stopPropagation(),e.addNewExpression(t)}}},[n("v-list-item-title",[n("v-icon",[e._v("mdi-plus")]),e._v(" Add expression ")],1)],1)],1)],2)],1)],1)],1)},de=[],pe=(n("a15b"),n("baa5"),n("fb6a"),n("1276"),"gimusy"),fe="gms",me="a^";function he(e){var t=e.indexOf("/"),n=e.lastIndexOf("/");return-1!==t&&-1!==n&&t!==n&&e.length-n-1<=pe.length}function ve(e){return e.split("/").slice(1,-1).join("/")}function ge(e){var t=e.split("/").slice(1);return[t.slice(0,-1).join("/"),t[t.length-1]]}var be=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-dialog",{attrs:{"max-width":"400px"},scopedSlots:e._u([{key:"activator",fn:function(t){var a=t.on,s=t.attrs;return[n("v-btn",e._g(e._b({staticClass:"grey darken-3",attrs:{icon:"",small:""}},"v-btn",s,!1),a),[n("v-icon",[e._v(" mdi-information ")])],1)]}}]),model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[n("v-card",[n("v-card-title",[n("span",{staticClass:"headline"},[e._v(e._s(e.label))])]),n("v-card-text",[n("v-container",[e._t("default")],2)],1),n("v-card-actions",[n("v-spacer"),n("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:function(t){e.dialog=!1}}},[e._v(" Close ")])],1)],1)],1)},xe=[],Se={name:"InfoDialog",props:["label"],data:function(){return{dialog:!1}}},Ce=Se,we=n("b0af"),ye=n("99d9"),ke=n("a523"),Oe=n("169a"),Ee=n("132d"),_e=n("2fa4"),Ve=Object(S["a"])(Ce,be,xe,!1,null,null,null),Te=Ve.exports;w()(Ve,{VBtn:j["a"],VCard:we["a"],VCardActions:ye["a"],VCardText:ye["c"],VCardTitle:ye["d"],VContainer:ke["a"],VDialog:Oe["a"],VIcon:Ee["a"],VSpacer:_e["a"]});var Me=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-dialog",{attrs:{persistent:"","max-width":"300px"},on:{"click:outside":e.clickOutside},model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[n("v-card",{ref:"content"},[n("v-card-title",[n("span",{staticClass:"headline"},[e._v("Expression Editor")])]),n("v-card-text",[n("v-container",[n("v-row",{attrs:{align:"center"}},[n("v-col",{attrs:{cols:"8"}},[n("v-text-field",{attrs:{label:"Name",required:""},model:{value:e.expression.name,callback:function(t){e.$set(e.expression,"name",t)},expression:"expression.name"}})],1),n("v-col",{attrs:{cols:"12"}},[n("v-text-field",{attrs:{label:"RegEx",required:""},model:{value:e.expressionField,callback:function(t){e.expressionField=t},expression:"expressionField"}})],1)],1)],1),n("label",[e._v("Color Target")]),n("HorizontalSelection",{attrs:{options:[{name:"Background",val:"background-color"},{name:"Text",val:"color"}],value:e.expression.colorTarget},on:{changedValue:function(t){e.expression.colorTarget=t}}})],1),n("v-card-actions",[n("v-spacer"),n("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:function(t){return e.closeDialog(!1)}}},[e._v("Close")]),n("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:function(t){return e.closeDialog(!0)}}},[e._v("Save")])],1)],1)],1)},$e=[],Be=(n("b64b"),{Error:{NoTextDecoderStream:{content:"Your browser doesn't seem to have the TextDecoderStream class. Maybe check on its documentation?",timeout:-1},NoTextEncoderStream:{content:"Your browser doesn't seem to have the TextEncoderStream class. Maybe check on its documentation?",timeout:-1},NoPortSelected:{content:"No serial port selected. Connection stopped.",timeout:2e3},ConnectionFailed:{content:"Your serial connection failed somehow. Please try again.",timeout:3e3},InvalidRegExp:{content:"There seemed to be something wrong with your RegExp. It's now back to the default.",timeout:3e3},CommandSave:{content:"There was an error saving this command. Please try again.",timeout:3e3},ExpressionSave:{content:"There was an error saving this expression. Please try again.",timeout:3e3},Custom:function(e){return{color:"error",content:e,timeout:-1}}},Success:{SerialConnectionOpened:{content:"Successfully opened a serial connection!",timeout:2e3},SerialConnectionClosed:{content:"Successfully closed a serial connection!",timeout:2e3},CommandTriggered:function(e){return{color:"success",content:"The command '".concat(e,"' was triggered!"),timeout:1e3}},LoadUserConfiguration:function(e){return{color:"success",content:"Previous session configuration found!",timeout:6e3,buttons:[{text:"Load",callback:e}]}}},Warning:{SerialConnectionClosed:{content:"The serial connection was closed.",timeout:5e3},NoRegexSlashes:{content:"Hmm... Did you write your regex with '/' and flags? Those will be treated as actual characters, as you only need to write the regex content. The default flags are 'gms'.",timeout:7e3},DidntSaveCommand:function(e){return{color:"warning",content:"Your command changes weren't saved.",timeout:4e3,buttons:[{text:"Save",callback:e}]}},DidntSaveExpression:function(e){return{color:"warning",content:"Your expression changes weren't saved.",timeout:4e3,buttons:[{text:"Save",callback:e}]}}}}),Re={Error:"error",Success:"success",Warning:"warning"};Object.keys(Be).forEach((function(e){Object.values(Be[e]).forEach((function(t){t instanceof Object&&(t.color=Re[e])}))}));var je=Be,Le={name:"ExpressionEditor",components:{HorizontalSelection:D},data:function(){return{dialog:!1,expression:{name:"",expression:"",colorTarget:""},expressionField:""}},methods:{openDialog:function(e){this.dialog=!0,this.expression=e,this.previousExpression=Object.assign({},e),this.expressionField=ve(this.expression.expression.toString())},closeDialog:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!e)return Object.assign(this.expression,this.previousExpression),void(this.dialog=!1);this.trySettingRegex(),this.dialog=!1},trySettingRegex:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.expression,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.expressionField;try{he(t)&&this.$emit("snackbar",je.Warning.NoRegexSlashes),e.expression=new RegExp(t||me,"")}catch(n){this.$emit("snackbar",je.Error.InvalidRegExp),e.expression=new RegExp(me,"")}},expressionsEqual:function(e,t){var n=e.expression?e.expression.toString():"",a=t.expression?t.expression.toString():"";return JSON.stringify(e)===JSON.stringify(t)&&n===a},shouldWarnNotSaved:function(){return!this.expressionsEqual(this.expression,this.previousExpression)||this.expressionField!==ve(this.previousExpression.expression.toString())},clickOutside:function(e){var t=this;if(this.shouldWarnNotSaved()){var n=this.expression,a=this.expressionField,s=Object.assign({},this.expression);this.$emit("snackbar",je.Warning.DidntSaveExpression((function(){Object.assign(n,s),t.trySettingRegex(n,a)})))}this.$refs.content.$el.contains(e.target)||this.closeDialog(!1)}}},De=Le,Ne=Object(S["a"])(De,Me,$e,!1,null,null,null),Ie=Ne.exports;w()(Ne,{VBtn:j["a"],VCard:we["a"],VCardActions:ye["a"],VCardText:ye["c"],VCardTitle:ye["d"],VCol:P["a"],VContainer:ke["a"],VDialog:Oe["a"],VRow:_["a"],VSpacer:_e["a"],VTextField:W["a"]});var Fe={name:"ExpressionList",components:{InfoDialog:Te,ExpressionEditor:Ie,NavigationDrawerRow:T},props:["value"],methods:{sendSnackbar:function(e){this.$emit("snackbar",e)},addNewExpression:function(e){e.stopPropagation();var t=this.value.length?this.value[this.value.length-1].id+1:0,n={id:t,name:"Expression ".concat(t),active:!1,expression:new RegExp(me,""),color:"#000000",colorEdit:!1,colorTarget:"background-color"};this.value.push(n),this.openExpressionEditor(n)},openExpressionEditor:function(e){this.$refs.expressionEditor.openDialog(e)},updateColor:function(e,t){e.color=t,this.$set(this.value,this.value.indexOf(e),e)}}},Ae=Fe,ze=(n("4855"),n("ac7c")),Pe=n("03a4"),qe=n("8860"),He=n("da13"),We=n("1800"),Ue=n("5d23"),Je=n("1baa"),Ge=n("e449"),Ye=Object(S["a"])(Ae,ue,de,!1,null,null,null),Xe=Ye.exports;w()(Ye,{VBtn:j["a"],VCard:we["a"],VCardText:ye["c"],VCheckbox:ze["a"],VColorPicker:Pe["a"],VIcon:Ee["a"],VList:qe["a"],VListItem:He["a"],VListItemAction:We["a"],VListItemContent:Ue["a"],VListItemGroup:Je["a"],VListItemTitle:Ue["c"],VMenu:Ge["a"],VSpacer:_e["a"]});var Ke=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("NavigationDrawerRow",{scopedSlots:e._u([{key:"header",fn:function(){return[n("InfoDialog",{attrs:{label:"Commands"}},[n("p",[e._v(" Here, you can add "),n("b",[e._v("commands")]),e._v(" to quickly send whenever necessary, without needing to type it over and over again. ")]),n("p",[e._v(" You can write them as a simple Javascript escaped string, for example: "),n("code",[e._v("Never Gonn\\x61 Give Yo\\165 Up!\\n")]),e._v(" "),n("br"),n("span",{staticClass:"text-caption"},[e._v(" Is this considered a rickroll? ")])]),n("p",[n("b",[e._v("Just a note!!!")]),e._v(" We're not simply evaluating the string, we use a really nice library to safely process the text, so don't worry! ")])]),n("v-spacer"),n("div",{staticClass:"text-button"},[e._v("Commands")]),n("v-spacer")]},proxy:!0}])},[n("CommandEditor",{ref:"commandEditor",on:{snackbar:function(t){return e.sendSnackbar(t)},"command-changed":e.commandChanged}}),n("v-card",{staticClass:"grey darken-3 custom-scrollbar",staticStyle:{height:"260px",width:"100%","overflow-y":"scroll",resize:"vertical"}},[n("v-list",[n("v-list-item-group",[e._l(e.value,(function(t,a){return n("v-list-item",{key:a},[n("v-list-item-action",{staticClass:"ma-0 mr-4"},[n("v-btn",{attrs:{icon:"",color:"white"},on:{click:function(n){return e.sendCommand(t.content)}}},[n("v-icon",{staticClass:"mdi-flip-horizontal",attrs:{large:""}},[e._v(" mdi-reply ")])],1)],1),n("v-list-item-content",{on:{click:function(n){return e.openCommandEditor(t)}}},[n("v-list-item-title",{domProps:{textContent:e._s(t.name)}})],1)],1)})),n("v-list-item",{staticClass:"ma-2"},[n("v-list-item-action"),n("v-list-item-content",{on:{click:function(t){return t.stopPropagation(),e.addNewCommand(t)}}},[n("v-list-item-title",[n("v-icon",[e._v("mdi-plus")]),e._v(" Add command ")],1)],1)],1)],2)],1)],1)],1)},Qe=[],Ze=(n("a1f0"),n("b85c")),et=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-dialog",{attrs:{persistent:"","max-width":"400px"},on:{"click:outside":e.clickOutside},model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[n("v-card",{ref:"content"},[n("v-card-title",[n("span",{staticClass:"headline"},[e._v("Command Editor")])]),n("v-card-text",[n("v-container",[n("v-row",{attrs:{align:"center"}},[n("span",{staticClass:"text-caption"},[e._v(" Write as you normally would write a Javascript string. For example, to write a 0x01 byte, write '\\x01'. ")]),n("span",{staticClass:"text-caption"},[e._v(" Also, by enabling capture groups in your RegEx match, you can also use $n inside your command ($1 to $n returns each capture group). In this case, if you want a literal '$n', write '$' as '\\x24'. ")]),n("v-col",{attrs:{cols:"8"}},[n("v-text-field",{attrs:{label:"Name",required:""},model:{value:e.command.name,callback:function(t){e.$set(e.command,"name",t)},expression:"command.name"}})],1),n("v-col",{attrs:{cols:"12"}},[n("v-text-field",{attrs:{label:"Command",required:""},model:{value:e.command.content,callback:function(t){e.$set(e.command,"content",t)},expression:"command.content"}})],1),n("v-card",{staticClass:"grey darken-3 pa-2"},[n("span",{staticClass:"text-caption"},[e._v(" Send automatically when this RegEx matches a new message: "),n("br"),e._v(" (leave empty for a manual command) ")]),n("v-col",{staticClass:"pb-0",attrs:{cols:"12"}},[n("v-text-field",{attrs:{label:"RegEx",required:""},model:{value:e.sequenceField,callback:function(t){e.sequenceField=t},expression:"sequenceField"}})],1),n("v-row",{staticClass:"pa-0"},[n("v-col",{staticClass:"pa-0",attrs:{cols:"6"}}),n("v-col",{staticClass:"pa-0",attrs:{cols:"6"}},[n("v-checkbox",{staticClass:"mt-0",attrs:{label:"Capture Groups"},model:{value:e.command.captureGroups,callback:function(t){e.$set(e.command,"captureGroups",t)},expression:"command.captureGroups"}})],1)],1)],1)],1)],1)],1),n("v-card-actions",[n("v-spacer"),n("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:function(t){return e.closeDialog(!1)}}},[e._v("Close")]),n("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:function(t){return e.closeDialog(!0)}}},[e._v("Save")])],1)],1)],1)},tt=[],nt={name:"CommandEditor",data:function(){return{dialog:!1,command:{id:-1,name:"",content:"",sequence:null,captureGroups:!1,processedContent:""},sequenceField:""}},methods:{openDialog:function(e){this.dialog=!0,this.command=e,this.previousCommand=JSON.parse(JSON.stringify(e)),this.previousCommand.sequence=this.command.sequence,this.command.sequence?(this.sequenceField=ve(this.command.sequence.toString()),this.command.sequence=null):this.sequenceField=""},closeDialog:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!e)return Object.assign(this.command,this.previousCommand),void(this.dialog=!1);this.trySettingRegex(),this.processContent(),this.dialog=!1},processContent:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.command;if(e.captureGroups){for(var t=[],n=0,a=0;a<e.content.length;a++)if("$"===e.content[a]){var s=a+1;while(e.content.charCodeAt(s)>=48&&e.content.charCodeAt(s)<=57)s++;if(s>a+1){var o=parseInt(e.content.slice(a+1,s));o&&(t.push(l()(e.content.slice(n,a))),t.push(o),n=s)}}t.push(l()(e.content.slice(n))),e.processedContent=t}else e.processedContent=l()(e.content)},trySettingRegex:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.command,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.sequenceField;if(t)try{he(t)&&this.$emit("snackbar",je.Warning.NoRegexSlashes),e.sequence=new RegExp(t,fe),this.$emit("command-changed",e)}catch(n){this.$emit("snackbar",je.Error.InvalidRegExp),e.sequence=null}},shouldWarnNotSaved:function(){var e=this.previousCommand.sequence?ve(this.previousCommand.sequence.toString()):"",t=this.previousCommand.sequence;this.previousCommand.sequence=null;var n=JSON.stringify(this.command)!==JSON.stringify(this.previousCommand)||this.sequenceField!==e;return this.previousCommand.sequence=t,n},clickOutside:function(e){var t=this;if(this.shouldWarnNotSaved()){var n=this.command,a=this.sequenceField,s=JSON.stringify(this.command);this.$emit("snackbar",je.Warning.DidntSaveCommand((function(){Object.assign(n,JSON.parse(s)),t.trySettingRegex(n,a),t.processContent(n)})))}this.$refs.content.$el.contains(e.target)||this.closeDialog(!1)}}},at=nt,st=Object(S["a"])(at,et,tt,!1,null,null,null),ot=st.exports;w()(st,{VBtn:j["a"],VCard:we["a"],VCardActions:ye["a"],VCardText:ye["c"],VCardTitle:ye["d"],VCheckbox:ze["a"],VCol:P["a"],VContainer:ke["a"],VDialog:Oe["a"],VRow:_["a"],VSpacer:_e["a"],VTextField:W["a"]});var it=n("0f32"),rt=n.n(it),ct={name:"CommandList",components:{InfoDialog:Te,CommandEditor:ot,NavigationDrawerRow:T},props:["value","scanBufferSize"],data:function(){return{scanBuffer:""}},methods:{sendSnackbar:function(e){this.$emit("snackbar",e)},addNewCommand:function(){var e=this.value.length?this.value[this.value.length-1].id+1:0,t={id:e,name:"Command ".concat(e),content:"",sequence:null,scanCursor:this.scanBuffer.length,captureGroups:!1,processedContent:[""]};this.value.push(t),this.openCommandEditor(t)},openCommandEditor:function(e){this.$refs.commandEditor.openDialog(e)},commandChanged:function(e){e.scanCursor=this.scanBuffer.length},sendCommand:function(e){e&&this.$emit("sendCommand",e)},addToScanBuffer:function(e){this.scanBuffer+=e;var t=this.scanBuffer.length-this.scanBufferSize;t>0&&(this.scanBuffer=this.scanBuffer.slice(t),this.value.forEach((function(e){e.scanCursor=Math.max(0,e.scanCursor-t)}))),this.checkMatches()},resetScanBuffer:function(){this.value.forEach((function(e){e.scanCursor=0})),this.scanBuffer=""},checkMatches:rt()((function(){var e=this;if(this.scanBuffer){var t=[];this.value.filter((function(e){return e.sequence})).forEach((function(n){var a,s=n.scanCursor,o=e.scanBuffer.slice(s,e.scanBuffer.length),i=o.matchAll(n.sequence),r=Object(Ze["a"])(i);try{var c=function(){var o=a.value;if(!o[0])return"continue";n.scanCursor=Math.max(n.scanCursor,s+o.index+o[0].length),n.captureGroups?n.processedContent.forEach((function(e){void 0===e.length?t.push(o[e]||"$".concat(e)):t.push(e)})):t.push(n.processedContent),e.sendSnackbar(je.Success.CommandTriggered(n.name))};for(r.s();!(a=r.n()).done;)c()}catch(l){r.e(l)}finally{r.f()}})),t.length&&this.sendCommand(t.join(""))}}),250)}},lt=ct,ut=Object(S["a"])(lt,Ke,Qe,!1,null,null,null),dt=ut.exports;w()(ut,{VBtn:j["a"],VCard:we["a"],VIcon:Ee["a"],VList:qe["a"],VListItem:He["a"],VListItemAction:We["a"],VListItemContent:Ue["a"],VListItemGroup:Je["a"],VListItemTitle:Ue["c"],VSpacer:_e["a"]});var pt=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-navigation-drawer",{attrs:{value:e.value,app:"",right:"",width:"350"},on:{input:e.emitToggle}},[n("draggable",{attrs:{tag:"v-expansion-panels","component-data":e.getExpansionPanelsOptions(),"ghost-class":"being-dragged"}},[e._t("default")],2),n("BottomInfo")],1)},ft=[],mt=n("310e"),ht=n.n(mt),vt=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticStyle:{"margin-top":"20px"}},[n("v-divider"),e._m(0)],1)},gt=[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"text-caption text-center pa-3"},[e._v(" Made by "),n("a",{attrs:{href:"https://github.com/Hyodar"}},[e._v("Hyodar")]),e._v(" and powered by Vue.js and Vuetify. ")])}],bt={name:"BottomInfo"},xt=bt,St=Object(S["a"])(xt,vt,gt,!1,null,null,null),Ct=St.exports;w()(St,{VDivider:y["a"]});var wt={name:"NavigationDrawer",components:{BottomInfo:Ct,draggable:ht.a},props:["value"],data:function(){return{openedPanels:[0,1,2]}},methods:{emitToggle:function(e){this.$emit("input",e)},getExpansionPanelsOptions:function(){return{on:{input:this.emitToggle},attrs:{flat:!0,multiple:!0,accordion:!0},props:{value:this.openedPanels}}}}},yt=wt,kt=(n("545c"),n("247f"),n("f774")),Ot=Object(S["a"])(yt,pt,ft,!1,null,"700acac5",null),Et=Ot.exports;w()(Ot,{VNavigationDrawer:kt["a"]});var _t=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-container",{attrs:{id:"chatContainer"}},[n("v-card",{style:{backgroundColor:e.chatBackgroundColor,transition:"0.2s ease-in-out background-color"},attrs:{outlined:""}},[n("div",{staticClass:"d-flex flex-row-reverse",style:{backgroundColor:e.headerBackgroundColor}},[n("v-btn",{attrs:{icon:"",color:"grey"},on:{click:e.clear}},[n("v-icon",[e._v("mdi-delete")])],1),n("v-menu",{attrs:{"offset-y":""},scopedSlots:e._u([{key:"activator",fn:function(t){var a=t.on,s=t.attrs;return[n("v-btn",e._g(e._b({attrs:{icon:"",color:"grey"}},"v-btn",s,!1),a),[n("v-icon",[e._v("mdi-download")])],1)]}}])},[n("v-list",[n("v-list-item",{on:{click:function(t){return e.downloadLog("json")}}},[n("v-list-item-title",[e._v("JSON")])],1),n("v-list-item",{on:{click:function(t){return e.downloadLog("csv")}}},[n("v-list-item-title",[e._v("CSV")])],1),n("v-list-item",{on:{click:function(t){return e.downloadLog("plainText")}}},[n("v-list-item-title",[e._v("Plain text")])],1)],1)],1)],1),n("DynamicScroller",{ref:"scroller",staticClass:"scroller custom-scrollbar",attrs:{items:e.messages,"min-item-size":24,buffer:300,emitUpdate:!0},on:{update:e.scrollerUpdate},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.item,s=t.index,o=t.active;return[n("DynamicScrollerItem",{attrs:{item:a,active:o,"data-active":o,"data-index":s,"size-dependencies":[a.content]}},[n("SerialChatMessage",{attrs:{id:a.id,date:a.date,content:a.content,author:a.author,logMode:e.logMode,expressions:e.activeExpressions,displayFunction:e.displayFunction}})],1)]}}])})],1)],1)},Vt=[],Tt=(n("38cf"),n("ade3")),Mt=n("2069"),$t=n.n(Mt),Bt=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"monitor-entry",on:{mouseover:function(t){e.showButton=!0},mouseleave:function(t){e.showButton=!1}}},[n("v-btn",{directives:[{name:"show",rawName:"v-show",value:e.showButton,expression:"showButton"}],staticClass:"message-button",attrs:{icon:"","x-small":""},on:{click:e.copyContent}},[n("v-icon",{attrs:{small:""}},[e._v(" mdi-content-copy ")])],1),e.logMode===e.LogMode.CHAT?n("div",[n("v-card",{staticStyle:{"font-family":"monospace","min-height":"42px"},attrs:{id:"msg-"+e.id,dense:"",color:e.color,elevation:2}},[n("div",[n("v-card-subtitle",{staticClass:"ma-0 pa-2 pb-0 offwhite-text"},[e._v(" "+e._s(e.dateString)+" ")])],1),n("v-card-text",{staticClass:"pa-0 pd-1 pl-2 mt-0 offwhite-text"},e._l(e.marks,(function(t,a){return n("span",{key:a,style:t.colorStyle+"; white-space: pre-wrap; font-weight: 700;"},[e._v(e._s(t.content))])})),0)],1),n("div",{staticStyle:{height:"10px"}})],1):e.logMode===e.LogMode.TERMINAL?n("div",{staticStyle:{"font-family":"monospace"},attrs:{id:"msg-"+e.id}},[n("span",[e._v(e._s(e.sentOrReceived))]),e._v(" "+e._s(e.dateString)+" "),n("br"),n("span",e._l(e.marks,(function(t,a){return n("span",{key:a,style:t.colorStyle+"; white-space: pre-wrap; font-weight: 700;"},[e._v(e._s(t.content))])})),0)]):e._e()],1)},Rt=[];n("4d90"),n("5319"),n("a630"),n("dca8"),n("3ca3"),n("466d");function jt(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return"".concat(e.charCodeAt(0).toString(t).padStart(n,"0")," ")}var Lt=/^[ -~]+$/,Dt=["NUL","SOH","STX","ETX","EOT","ENQ","ACK","BEL","BS","HT","LF","VT","FF","CR","SO","SI","DLE","DC1","DC2","DC3","DC4","NAK","SYN","ETB","CAN","EM","SUB","ESC","FS","GS","RS","US"],Nt=Object.freeze({LF:"\n"}),It=Object.freeze(Dt.map((function(e){return"<".concat(e,">").concat(Nt[e]||"")})));function Ft(e){return It[e.charCodeAt(0)]||"□"}var At=function(e){return e.match(Lt)?e:Ft(e)},zt=function(e){return jt(e,16,2)},Pt=function(e){return jt(e,2,8)};function qt(e,t){return Array.from(e).map(t).join("")}var Ht,Wt,Ut={SELF:0,SERIAL:1,COMMAND:2},Jt=Ut,Gt=(Ht={},Object(Tt["a"])(Ht,Jt.SELF,"primary"),Object(Tt["a"])(Ht,Jt.SERIAL,"secondary"),Object(Tt["a"])(Ht,Jt.COMMAND,"teal"),Ht),Yt=Gt,Xt="Sent",Kt="Received",Qt=(Wt={},Object(Tt["a"])(Wt,Jt.SELF,Xt),Object(Tt["a"])(Wt,Jt.SERIAL,Kt),Object(Tt["a"])(Wt,Jt.COMMAND,Xt),Wt),Zt=Qt,en=n("0665"),tn=n.n(en),nn={name:"SerialChatMessage",props:["id","content","date","author","logMode","expressions","displayFunction"],data:function(){return{LogMode:K,showButton:!1,marks:[]}},computed:{bindedExpressions:function(){var e=this,t=this.expressions.map((function(t){return[t[0],t[1].bind(null,e.addMarked.bind(e))]}));return t},rawContent:function(){return this.displayFunction===At?this.content:qt(this.content,this.displayFunction)},sentOrReceived:function(){return Zt[this.author]},color:function(){return Yt[this.author]},dateString:function(){var e=new Date(this.date);return"[".concat(e.toLocaleDateString()," - ").concat(e.toLocaleTimeString(),".").concat(e.getMilliseconds().toString().padStart(3,"0"),"]")}},mounted:function(){this.marks=[],new tn.a(this.bindedExpressions,fe).replace(this.content)},watch:{displayFunction:function(){this.marks=[],new tn.a(this.bindedExpressions,fe).replace(this.content)},bindedExpressions:function(){this.marks=[],new tn.a(this.bindedExpressions,fe).replace(this.content)},content:function(){this.marks=[],new tn.a(this.bindedExpressions,fe).replace(this.content)}},methods:{copyContent:function(){var e=document.createElement("textarea");document.getElementById("msg-".concat(this.id)).appendChild(e),e.value=this.rawContent,e.select(),e.setSelectionRange(0,99999),document.execCommand("copy"),e.remove()},addMarked:function(e,t){this.marks.length&&e===this.marks[this.marks.length-1].colorStyle?this.marks[this.marks.length-1].content+=t:this.marks.push({colorStyle:e,content:t})}}},an=nn,sn=(n("e936"),Object(S["a"])(an,Bt,Rt,!1,null,"3deb8689",null)),on=sn.exports;w()(sn,{VBtn:j["a"],VCard:we["a"],VCardSubtitle:ye["b"],VCardText:ye["c"],VIcon:Ee["a"]});n("ddb0"),n("2b3d");function rn(e,t,n){var a=document.createElement("a"),s=new Blob([e],{type:n});a.href=URL.createObjectURL(s),a.download=t,a.click(),URL.revokeObjectURL(a.href)}var cn=rn,ln={name:"SerialChat",props:["logMode","displayMode","messageBufferSize","expressions"],components:{SerialChatMessage:on},data:function(){var e;return{messages:[],msgIdCount:0,lastScrollPosition:0,lastScrollMessageIndex:0,authorLastMessage:(e={},Object(Tt["a"])(e,Jt.SELF,{index:0,id:0,time:0}),Object(Tt["a"])(e,Jt.SERIAL,{index:0,id:0,time:0}),Object(Tt["a"])(e,Jt.COMMAND,{index:0,id:0,time:-1/0}),e)}},computed:{activeExpressions:function(){var e=this,t=this.expressions.filter((function(e){return e.active})).map((function(t){var n="".concat(t.colorTarget,": ").concat(t.color);return[t.expression,function(t,a){return t(n,qt(a,e.displayFunction)),""}]}));return t.push([/[\s\S]/gm,function(t,n){return t("",qt(n,e.displayFunction)),""}]),t},displayFunction:function(){return this.displayMode===oe.ASCII?At:this.displayMode===oe.HEX?zt:Pt},chatBackgroundColor:function(){return this.logMode===K.CHAT?"transparent":"#000000b0"},headerBackgroundColor:function(){return this.logMode===K.CHAT?"#00000022":"#ffffff11"},lastSentMessage:function(){return this.messages[this.messages.length-1]||{}}},watch:{logMode:function(){this.scrollToCurrentMessage(),this.$refs.scroller.forceUpdate(!0)},displayMode:function(){this.$refs.scroller.forceUpdate(!0)}},methods:{addEntry:function(e,t){var n=this.authorLastMessage[t],a=!1,s=this.$refs.scroller.$refs.scroller.$el,o=s.scrollTop+s.offsetHeight;if(a=s.scrollHeight-o<=50,this.shouldAppendToLastMessage(t)){var i=this.messageIndexSearch(n.id,n.index);this.messages[i].content+=e,n.time=Date.now()}else{this.messages.push({id:this.msgIdCount++,date:Date.now(),content:e,author:t});while(this.messages.length>this.messageBufferSize)this.messages.shift();t!==Jt.COMMAND&&(this.authorLastMessage[t]={id:this.msgIdCount-1,index:this.messages.length-1,time:Date.now()})}a&&setTimeout(this.scrollToBottom.bind(this),100)},shouldAppendToLastMessage:function(e){var t=Date.now()-this.authorLastMessage[e].time;return t<400&&this.lastSentMessage.author===e},scrollToBottom:function(){this.$refs.scroller.scrollToBottom()},scrollToCurrentMessage:function(){this.$refs.scroller.scrollToItem(this.lastScrollMessageIndex)},messageIndexSearch:function(e,t){for(var n=t;n>=0;n--)if(this.messages[n].id===e)return n},scrollerUpdate:function(e,t){this.lastScrollMessageIndex=t},clear:function(){Object.assign(this.$data,this.$options.data.apply(this)),this.$emit("clear")},downloadLog:function(e){var t=this,n=function(e){return t.displayFunction===At?e.content:qt(e.content,t.displayFunction)},a=this.messages.map((function(e){return{type:Zt[e.author].toUpperCase(),date:new Date(e.date).toISOString(),content:n(e)}}));if("json"===e){var s=JSON.stringify(a);cn(s,"log.json","application/json")}else if("csv"===e){var o=new $t.a({keys:["type","date","content"].map((function(e){return{key:e,as:e}})),data:a}).getCSV();cn(o,"log.csv","text/csv")}else{var i="\n".concat("-".repeat(79),"\n"),r=a.map((function(e){return"[".concat(e.type," - ").concat(e.date,"]\n").concat(e.content)})).join(i);cn(r,"log.txt","text/plain")}}}},un=ln,dn=(n("5258"),Object(S["a"])(un,_t,Vt,!1,null,null,null)),pn=dn.exports;w()(dn,{VBtn:j["a"],VCard:we["a"],VContainer:ke["a"],VIcon:Ee["a"],VList:qe["a"],VListItem:He["a"],VListItemTitle:Ue["c"],VMenu:Ge["a"]});var fn=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-container",{staticClass:"grey darken-3",staticStyle:{height:"150px"}},[n("v-row",{attrs:{align:"center"}},[n("v-textarea",{staticClass:"pl-2",attrs:{outlined:"","hide-details":"",autocomplete:"off",height:"130px"},on:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")||t.ctrlKey||t.shiftKey||t.altKey||t.metaKey?null:e.sendMessage(t)}},model:{value:e.message,callback:function(t){e.message=t},expression:"message"}}),n("v-btn",{attrs:{icon:"",color:"primary","x-large":""},on:{click:e.sendMessage}},[n("v-icon",[e._v(" mdi-send ")])],1)],1)],1)},mn=[],hn={name:"SerialInput",data:function(){return{message:""}},methods:{sendMessage:function(){this.message&&(this.$emit("sendMessage",l()(this.message)),this.message="")}}},vn=hn,gn=n("a844"),bn=Object(S["a"])(vn,fn,mn,!1,null,null,null),xn=bn.exports;w()(bn,{VBtn:j["a"],VContainer:ke["a"],VIcon:Ee["a"],VRow:_["a"],VTextarea:gn["a"]});var Sn=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-snackbar",{directives:[{name:"show",rawName:"v-show",value:e.message,expression:"message"}],attrs:{top:"",color:e.message.color,timeout:-1},model:{value:e.isOn,callback:function(t){e.isOn=t},expression:"isOn"}},[e._v(" "+e._s(e.message.content)+" "),e._l(e.message.buttons,(function(t,a){return n("v-btn",{key:a,attrs:{text:""},on:{click:function(n){t.callback(),e.close()}}},[e._v(" "+e._s(t.text)+" ")])})),n("v-btn",{attrs:{text:""},on:{click:e.close}},[e._v("Close")]),n("div",{staticClass:"progress-bar-container"},[n("div",{ref:"progressBar",staticClass:"progress-bar"})])],2)},Cn=[],wn=n("d4ec"),yn=n("bee2"),kn=function(){function e(t){Object(wn["a"])(this,e),this.callback=t,this.timeoutHandle=null}return Object(yn["a"])(e,[{key:"schedule",value:function(e){this.timeoutHandle&&clearTimeout(this.timeoutHandle),e>=0&&(this.timeoutHandle=setTimeout(this.callback,e))}}]),e}(),On=kn,En={name:"Snackbar",data:function(){return{isOn:!1,progressBarTimeout:null,message:{color:null,content:null,buttons:[{text:null,callback:null}]},closeScheduler:null}},mounted:function(){this.closeScheduler=new On(this.close.bind(this))},methods:{setMessage:function(e){this.closeScheduler.schedule(e.timeout),this.isOn=!0,this.message=e,this.startProgressBar()},close:function(){this.isOn=!1},startProgressBar:function(){var e=this.$refs.progressBar;clearTimeout(this.progressBarTimeout),e.classList.add("no-transition"),e.style.width="0px",e.offsetHeight,e.classList.remove("no-transition"),e.style.transition="width ".concat(Math.max(this.message.timeout-100,0),"ms linear"),this.progressBarTimeout=setTimeout((function(){e.style.width="100%"}),100)}}},_n=En,Vn=(n("0d23"),n("2db4")),Tn=Object(S["a"])(_n,Sn,Cn,!1,null,"1b0a826a",null),Mn=Tn.exports;w()(Tn,{VBtn:j["a"],VSnackbar:Vn["a"]});var $n=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-dialog",{attrs:{fullscreen:"","hide-overlay":"",transition:"dialog-bottom-transition"},scopedSlots:e._u([{key:"activator",fn:function(t){var a=t.on,s=t.attrs;return[n("v-btn",e._g(e._b({attrs:{icon:""}},"v-btn",s,!1),a),[n("v-icon",{attrs:{medium:""}},[e._v(" mdi-cog ")])],1)]}}]),model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[n("v-card",[n("v-toolbar",[n("v-btn",{attrs:{icon:"",dark:""},on:{click:function(t){e.dialog=!1}}},[n("v-icon",[e._v("mdi-close")])],1),n("v-toolbar-title",[e._v("Settings")]),n("v-spacer"),n("v-toolbar-items",[n("v-btn",{attrs:{dark:"",text:""},on:{click:e.restoreDefaults}},[e._v("Restore defaults")])],1)],1),n("v-list",{attrs:{"three-line":"",subheader:""}},[n("v-subheader",[e._v("Encoding")]),n("v-list-item",[n("v-list-item-content",[n("v-list-item-title",[e._v("Encoding")]),n("v-list-item-subtitle",[e._v("Encoding standard of input sent to serial")]),n("v-combobox",{attrs:{items:e.encodings,value:e.encodeTo,rules:[function(t){return-1!==e.encodings.indexOf(t)||"Encoding doesn't exist - defaulted to latin-1/ISO 8859-1"}]},on:{change:function(t){e.$emit("update:encodeTo",e.encodings.find((function(e){return e==t}))||e.defaultValues.encodeTo)}}})],1)],1),n("v-list-item",[n("v-list-item-content",[n("v-list-item-title",[e._v("Decoding")]),n("v-list-item-subtitle",[e._v("Encoding standard of received serial data")]),n("v-combobox",{attrs:{items:e.encodings,value:e.decodeFrom,rules:[function(t){return-1!==e.encodings.indexOf(t)||"Encoding doesn't exist - defaulted to latin-1/ISO 8859-1"}]},on:{change:function(t){e.$emit("update:decodeFrom",e.encodings.find((function(e){return e==t}))||e.defaultValues.decodeTo)}}})],1)],1)],1),n("v-divider"),n("v-list",{attrs:{"three-line":"",subheader:""}},[n("v-subheader",[e._v("Advanced Options")]),n("v-list-item",[n("v-list-item-content",[n("v-list-item-title",[e._v("Message Buffer Size")]),n("v-list-item-subtitle",[e._v('Maximum number of serial "messages" held at a time')]),n("v-text-field",{attrs:{type:"number",min:"0",value:e.messageBufferSize,rules:[function(e){return e>=0||"Must be positive or zero"}]},on:{change:function(t){e.$emit("update:messageBufferSize",parseInt(t)||0)}}})],1)],1),n("v-list-item",[n("v-list-item-content",[n("v-list-item-title",[e._v("Scan Buffer Size")]),n("v-list-item-subtitle",[e._v("Maximum length of string buffer used for command RegEx matches (increase this if you have big sequences)")]),n("v-text-field",{attrs:{type:"number",min:"0",value:e.scanBufferSize,rules:[function(e){return e>=0||"Must be positive or zero"}]},on:{change:function(t){e.$emit("update:scanBufferSize",parseInt(t)||0)}}})],1)],1)],1)],1)],1)},Bn=[],Rn=(n("a9e3"),n("3835")),jn={name:"ConfigurationMenu",props:{scanBufferSize:{type:Number,required:!0},messageBufferSize:{type:Number,required:!0},decodeFrom:{type:String,required:!0},encodeTo:{type:String,required:!0}},mounted:function(){var e=this;this.restoreDefaults(),this.encodings.length||Promise.resolve().then(n.t.bind(null,"94bb",7)).then((function(t){e.encodings=Object.keys(t)}))},data:function(){return{dialog:!1,encodings:[],defaultValues:{scanBufferSize:1024,messageBufferSize:512,decodeFrom:"iso88591",encodeTo:"iso88591"}}},methods:{restoreDefaults:function(){var e=this;Object.entries(this.defaultValues).forEach((function(t){var n=Object(Rn["a"])(t,2),a=n[0],s=n[1];e.$emit("update:".concat(a),s)}))}}},Ln=jn,Dn=n("2b5d"),Nn=n("e0c7"),In=n("71d9"),Fn=n("2a7f"),An=Object(S["a"])(Ln,$n,Bn,!1,null,null,null),zn=An.exports;w()(An,{VBtn:j["a"],VCard:we["a"],VCombobox:Dn["a"],VDialog:Oe["a"],VDivider:y["a"],VIcon:Ee["a"],VList:qe["a"],VListItem:He["a"],VListItemContent:Ue["a"],VListItemSubtitle:Ue["b"],VListItemTitle:Ue["c"],VSpacer:_e["a"],VSubheader:Nn["a"],VTextField:W["a"],VToolbar:In["a"],VToolbarItems:Fn["a"],VToolbarTitle:Fn["b"]});var Pn=n("262e"),qn=n("2caf");if(!window.TransformStream){var Hn=function(){};window.TransformStream=Hn}var Wn=function(e){Object(Pn["a"])(n,e);var t=Object(qn["a"])(n);function n(e){return Object(wn["a"])(this,n),t.call(this,{start:function(){this.options=e},transform:function(e,t){t.enqueue(f.a.encode(e,this.options.encoding))}})}return n}(window.TransformStream),Un=function(e){Object(Pn["a"])(n,e);var t=Object(qn["a"])(n);function n(e){return Object(wn["a"])(this,n),t.call(this,{start:function(){this.options=e},transform:function(e,t){t.enqueue(f.a.decode(e,this.options.encoding))}})}return n}(window.TransformStream),Jn=function(){function e(t){Object(wn["a"])(this,e),e.checkCompatibility(),this.setDefaultCallbacks(),this.active=!1,this.serialWriter=null,this.serialReader=null,this.serialWriterClosed=null,this.serialReaderClosed=null,this.encoder=null,this.decoder=null,this.serialPort=null,this.defaultOptions={decodeFrom:"iso88591",encodeTo:"iso88591",readLoopCallback:null},this.loadOptions(t)}return Object(yn["a"])(e,[{key:"loadOptions",value:function(e){var t=this;this.options=e,Object.entries(this.defaultOptions).forEach((function(e){var n=Object(Rn["a"])(e,2),a=n[0],s=n[1];void 0===t.options[a]&&(t.options[a]=s)}))}},{key:"setDecodeFrom",value:function(e){this.options.decodeFrom=e}},{key:"setReadLoopCallback",value:function(e){var t=!1;this.active&&!this.options.readLoopCallback&&(t=!0),this.options.readLoopCallback=e,t&&this.readLoop()}},{key:"requestPort",value:function(){var t=Object(r["a"])(regeneratorRuntime.mark((function t(n){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!this.active){t.next=2;break}throw e.Error.AlreadyActive;case 2:return t.next=4,navigator.serial.requestPort(n);case 4:this.serialPort=t.sent;case 5:case"end":return t.stop()}}),t,this)})));function n(e){return t.apply(this,arguments)}return n}()},{key:"openConnection",value:function(){var t=Object(r["a"])(regeneratorRuntime.mark((function t(n){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(this.serialPort){t.next=2;break}throw e.Error.NoPortLoaded;case 2:return t.next=4,this.serialPort.open(n);case 4:if(this.serialPort.readable&&this.serialPort.writable){t.next=6;break}throw e.Error.NoStreams;case 6:this.active=!0,this.initializeReader(),this.initializeWriter();case 9:case"end":return t.stop()}}),t,this)})));function n(e){return t.apply(this,arguments)}return n}()},{key:"initializeReader",value:function(){var e=this.options;this.decoder=new Un({get encoding(){return e.decodeFrom}}),this.serialReaderClosed=this.serialPort.readable.pipeTo(this.decoder.writable),this.serialReader=this.decoder.readable.getReader(),this.options.readLoopCallback&&this.readLoop()}},{key:"initializeWriter",value:function(){var e=this.options;this.encoder=new Wn({get encoding(){return e.encodeTo}}),this.serialWriterClosed=this.encoder.readable.pipeTo(this.serialPort.writable),this.serialWriter=this.encoder.writable.getWriter()}},{key:"write",value:function(e){this.serialWriter.write(e)}},{key:"read",value:function(){var e=Object(r["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.serialReader.read();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"readLoop",value:function(){var e=Object(r["a"])(regeneratorRuntime.mark((function e(){var t,n,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.serialReader.read();case 3:a=e.sent,t=a.value,n=a.done,e.next=14;break;case 8:if(e.prev=8,e.t0=e["catch"](0),!(e.t0 instanceof DOMException)){e.next=12;break}return e.abrupt("break",19);case 12:this.serialReader.releaseLock(),this.serialReader=this.decoder.readable.getReader();case 14:if(!n){e.next=16;break}return e.abrupt("break",19);case 16:this.options.readLoopCallback(t);case 17:e.next=0;break;case 19:case"end":return e.stop()}}),e,this,[[0,8]])})));function t(){return e.apply(this,arguments)}return t}()},{key:"close",value:function(){var e=Object(r["a"])(regeneratorRuntime.mark((function e(){var t,n=arguments;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t=n.length>0&&void 0!==n[0]&&n[0],this.active=!1,!this.serialWriter){e.next=6;break}return this.serialWriter.close(),e.next=6,this.writableStreamClosed;case 6:if(!this.serialReader){e.next=18;break}return e.prev=7,e.next=10,this.serialReader.cancel();case 10:e.next=16;break;case 12:if(e.prev=12,e.t0=e["catch"](7),t&&e.t0 instanceof DOMException){e.next=16;break}throw e.t0;case 16:return e.next=18,this.serialReaderClosed.catch((function(){}));case 18:if(!this.serialPort){e.next=21;break}return e.next=21,this.serialPort.close();case 21:this.serialReader=null,this.serialWriter=null,this.serialReaderClosed=null,this.serialWriterClosed=null,this.serialPort=null,this.encoder=null,this.decoder=null;case 28:case"end":return e.stop()}}),e,this,[[7,12]])})));function t(){return e.apply(this,arguments)}return t}()},{key:"addEventListener",value:function(e,t){navigator.serial.addEventListener(e,t)}},{key:"setDefaultCallbacks",value:function(){this.addEventListener("disconnect",this.close.bind(this,!0))}}],[{key:"checkCompatibility",value:function(){if(!("serial"in navigator))throw e.Error.NoWebSerial;if(!window.TransformStream)throw e.Error.NoTransformStream}}]),e}();Object(Tt["a"])(Jn,"Error",{NoWebSerial:new Error("This browser doesn't support or hasn't enabled the WebSerialAPI."),NoTransformStream:new Error("This browser doesn't support the Streams API "),NoPortLoaded:new Error("There was not port loaded."),NoStreams:new Error("Invalid serial port streams."),AlreadyActive:new Error("This serial connection is already active.")});var Gn=Jn,Yn={name:"App",components:{NavigationDrawer:Et,SerialChat:pn,SerialInput:xn,Snackbar:Mn,SerialOptions:J,LogModeOptions:te,DisplayModeOptions:le,ExpressionList:Xe,CommandList:dt,ConfigurationMenu:zn},mounted:function(){try{Gn.checkCompatibility()}catch(e){switch(e){case Gn.Error.NoWebSerial:return void this.noWebSerialAlert();case Gn.Error.NoTransformStream:return void this.setSnackbarMessage(je.Error.NoTextDecoderStream)}throw e}window.onbeforeunload=this.saveUserConfiguration.bind(this),this.tryLoadingUserConfiguration()},data:function(){return{snackbarMessage:null,browserSerial:null,drawer:!0,userOptions:{logMode:K.CHAT,displayMode:oe.ASCII,scanBufferSize:1024,messageBufferSize:512,decodeFrom:"iso88591",encodeTo:"iso88591",serialConnection:{active:!1,serialOptions:{baudrate:null,databits:8,stopbits:1,parity:"none",buffersize:255,rtscts:!1,xon:!1,xoff:!1,xany:!1}},expressions:[],commands:[]}}},methods:{sendMessage:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Jt.SELF;t===Jt.SELF||t===Jt.COMMAND?(this.browserSerial&&this.browserSerial.write(e),this.$refs.chat.addEntry(f.a.encode(e,this.userOptions.encodeTo).toString(),t),this.$refs.commandList.addToScanBuffer(e)):(this.$refs.chat.addEntry(e,t),this.$refs.commandList.addToScanBuffer(e))},noWebSerialAlert:function(){d()({title:"Error!",text:"Your browser doesn't seem to have the WebSerialAPI enabled. Please check if it supports it.\nThe 'enable' button will lead you to instructions to activate it on Chrome/Chromium.",icon:"error",buttons:["Enable","Continue Anyway"],dangerMode:!0,closeOnClickOutside:!1,closeOnEsc:!1}).then((function(e){e||(window.location.href="https://codelabs.developers.google.com/codelabs/web-serial/#2")}))},setSnackbarMessage:function(e){this.$refs.snackbar.setMessage(e)},toggleDrawer:function(){this.drawer=!this.drawer},openSerial:function(){var e=this;return Object(r["a"])(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n=e,t.t0=Gn,t.t1=function(t){e.sendMessage(t,Jt.SERIAL)},t.t2={get decodeFrom(){return n.userOptions.decodeFrom},get encodeTo(){return n.userOptions.encodeTo},readLoopCallback:t.t1},e.browserSerial=new t.t0(t.t2),e.browserSerial.addEventListener("disconnect",(function(){e.closeSerial(!0),e.setSnackbarMessage(je.Warning.SerialConnectionClosed)})),t.prev=6,t.next=9,e.browserSerial.requestPort();case 9:t.next=15;break;case 11:return t.prev=11,t.t3=t["catch"](6),e.setSnackbarMessage(je.Error.NoPortSelected),t.abrupt("return");case 15:return t.prev=15,t.next=18,e.browserSerial.openConnection(e.userOptions.serialConnection.serialOptions);case 18:t.next=24;break;case 20:return t.prev=20,t.t4=t["catch"](15),e.setSnackbarMessage(je.Error.Custom("Serial port opening error: ".concat(t.t4))),t.abrupt("return");case 24:e.userOptions.serialConnection.active=!0,e.setSnackbarMessage(je.Success.SerialConnectionOpened);case 26:case"end":return t.stop()}}),t,null,[[6,11],[15,20]])})))()},closeSerial:function(){var e=arguments,t=this;return Object(r["a"])(regeneratorRuntime.mark((function n(){var a;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(a=e.length>0&&void 0!==e[0]&&e[0],a){n.next=4;break}return n.next=4,t.browserSerial.close();case 4:t.userOptions.serialConnection.active=!1,t.browserSerial=null,t.setSnackbarMessage(je.Success.SerialConnectionClosed);case 7:case"end":return n.stop()}}),n)})))()},sendCommand:function(e){this.sendMessage(l()(e),Jt.COMMAND,!0)},onChatCleared:function(){this.$refs.commandList.resetScanBuffer()},saveUserConfiguration:function(){this.userOptions.serialConnection.active=!1,this.userOptions.expressions=this.userOptions.expressions.map((function(e){return Object(i["a"])(Object(i["a"])({},e),{},{expression:ge(e.expression.toString())})})),this.userOptions.commands=this.userOptions.commands.map((function(e){return Object(i["a"])(Object(i["a"])({},e),{},{sequence:e.sequence?ge(e.sequence.toString()):null})})),window.localStorage.setItem("web-serial-config",JSON.stringify(this.userOptions))},tryLoadingUserConfiguration:function(){var e=this,t=window.localStorage.getItem("web-serial-config");t&&this.setSnackbarMessage(je.Success.LoadUserConfiguration((function(){e.loadUserConfiguration(JSON.parse(t))})))},loadUserConfiguration:function(e){var t=this,n=this.userOptions.expressions.length?this.userOptions.expressions[this.userOptions.expressions.length-1].id:-1;e.expressions.forEach((function(e){e.expression=new RegExp(e.expression[0],e.expression[1]);var t=++n;e.name==="Expression ".concat(e.id)&&(e.name="Expression ".concat(t)),e.id=t}));var a=this.userOptions.commands.length?this.userOptions.commands[this.userOptions.commands.length-1].id:-1;e.commands.forEach((function(e){e.sequence&&(e.sequence=new RegExp(e.sequence[0],e.sequence[1])),e.scanCursor=t.$refs.commandList.scanBuffer.length;var n=++a;e.name==="Command ".concat(e.id)&&(e.name="Command ".concat(n)),e.id=n})),e.expressions=this.userOptions.expressions.concat(e.expressions),e.commands=this.userOptions.commands.concat(e.commands),this.userOptions=e}}},Xn=Yn,Kn=(n("034f"),n("7496")),Qn=n("40dc"),Zn=n("5bc1"),ea=n("f6c4"),ta=Object(S["a"])(Xn,s,o,!1,null,null,null),na=ta.exports;w()(ta,{VApp:Kn["a"],VAppBar:Qn["a"],VAppBarNavIcon:Zn["a"],VMain:ea["a"],VSpacer:_e["a"]});var aa=n("f309");a["a"].use(aa["a"],{components:{VExpansionPanels:q["a"]}});var sa=new aa["a"]({theme:{dark:!0}}),oa=(n("a899"),n("e508"));a["a"].use(oa["a"]),a["a"].config.productionTip=!1,new a["a"]({vuetify:sa,render:function(e){return e(na)}}).$mount("#app")},"6ba9":function(e,t,n){"use strict";var a=n("9558"),s=n.n(a);s.a},"75a8":function(e,t,n){},"819c":function(e,t,n){},8463:function(e,t,n){"use strict";var a=n("17fc"),s=n.n(a);s.a},"85ec":function(e,t,n){},9558:function(e,t,n){},dd46:function(e,t,n){},e936:function(e,t,n){"use strict";var a=n("819c"),s=n.n(a);s.a},e9a3:function(e,t,n){}});
//# sourceMappingURL=app.93f514db.js.map