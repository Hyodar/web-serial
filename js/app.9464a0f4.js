(function(e){function t(t){for(var a,r,s=t[0],c=t[1],l=t[2],d=0,p=[];d<s.length;d++)r=s[d],Object.prototype.hasOwnProperty.call(o,r)&&o[r]&&p.push(o[r][0]),o[r]=0;for(a in c)Object.prototype.hasOwnProperty.call(c,a)&&(e[a]=c[a]);u&&u(t);while(p.length)p.shift()();return i.push.apply(i,l||[]),n()}function n(){for(var e,t=0;t<i.length;t++){for(var n=i[t],a=!0,s=1;s<n.length;s++){var c=n[s];0!==o[c]&&(a=!1)}a&&(i.splice(t--,1),e=r(r.s=n[0]))}return e}var a={},o={app:0},i=[];function r(t){if(a[t])return a[t].exports;var n=a[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,r),n.l=!0,n.exports}r.m=e,r.c=a,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)r.d(n,a,function(t){return e[t]}.bind(null,a));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="/web-serial/";var s=window["webpackJsonp"]=window["webpackJsonp"]||[],c=s.push.bind(s);s.push=t,s=s.slice();for(var l=0;l<s.length;l++)t(s[l]);var u=c;i.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("56d7")},"0eac":function(e,t,n){"use strict";var a=n("c8bf"),o=n.n(a);o.a},"545c":function(e,t,n){"use strict";var a=n("8314"),o=n.n(a);o.a},"56d7":function(e,t,n){"use strict";n.r(t);n("e260"),n("e6cf"),n("cca6"),n("a79d");var a=n("2b0e"),o=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-app",{staticStyle:{"background-color":"#262626"},attrs:{dark:""}},[n("v-app-bar",{attrs:{app:""}},[n("v-spacer"),n("v-app-bar-nav-icon",{on:{click:function(t){return t.stopPropagation(),e.toggleDrawer(t)}}})],1),n("NavigationDrawer",{ref:"drawer",attrs:{active:e.navigationDrawer.active,menus:e.navigationDrawer.menus,optionData:e.navigationDrawer.optionData},on:{snackbar:e.setSnackbarMessage,serialConnected:e.openSerial,serialDisconnected:e.closeSerial}}),n("v-main",[n("Snackbar",{ref:"snackbar"}),n("SerialChat",{ref:"chat",attrs:{logMode:e.navigationDrawer.optionData.logMode,displayMode:e.navigationDrawer.optionData.displayMode,messageBufferSize:500,expressions:e.navigationDrawer.optionData.expressions}}),n("SerialInput",{on:{sendMessage:e.sendMessage}})],1)],1)},i=[],r=(n("96cf"),n("1da1")),s=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-navigation-drawer",{attrs:{app:"",right:"",width:"350"},model:{value:e.drawer,callback:function(t){e.drawer=t},expression:"drawer"}},[n("v-container",[n("v-row",{staticClass:"ma-1 mt-5",attrs:{justify:"center"}},[n("div",{staticClass:"text-button"},[e._v(" Serial Connection ")])]),n("v-divider",{staticClass:"ma-2"}),n("v-row",{staticClass:"ma-3 mb-0",attrs:{justify:"center",align:"center"}},[n("v-col",{attrs:{cols:9}},[n("v-autocomplete",{attrs:{items:e.menus.serialConnection.baudrate.suggestions,label:"Baud Rate"},model:{value:e.optionData.serialConnection.serialOptions.baudrate,callback:function(t){e.$set(e.optionData.serialConnection.serialOptions,"baudrate",t)},expression:"optionData.serialConnection.serialOptions.baudrate"}})],1),n("v-col",{attrs:{cols:3}},[n("v-btn",{attrs:{text:"",loading:e.menus.serialConnection.loading},on:{click:e.toggleSerialConnection}},[e._v(" "+e._s(e.serialConnectionButtonText)+" ")])],1)],1),n("v-expansion-panels",{attrs:{flat:""}},[n("v-expansion-panel",{staticClass:"transparent"},[n("v-expansion-panel-header",[n("span",{staticClass:"text-button",staticStyle:{"font-size":"0.75rem !important"}},[e._v(" Additional Options ")])]),n("v-expansion-panel-content",{staticClass:"grey darken-3"},[n("v-row",[n("v-col",[n("v-select",{attrs:{items:e.menus.serialConnection.parityType.options,value:e.optionData.serialConnection.serialOptions.parity,label:"Parity Type"}})],1),n("v-col",[n("v-text-field",{attrs:{type:"number",value:e.optionData.serialConnection.serialOptions.buffersize,label:"Buffer Size"}})],1)],1),n("v-row",[n("v-col",[n("v-select",{attrs:{items:e.menus.serialConnection.databits.options,value:e.optionData.serialConnection.serialOptions.databits,label:"Data Bits"}})],1),n("v-col",[n("v-select",{attrs:{items:e.menus.serialConnection.stopbits.options,value:e.optionData.serialConnection.serialOptions.stopbits,label:"Stop Bits"}})],1)],1),n("HorizontalSelection",{staticClass:"mt-2",attrs:{multiple:"",dense:"",options:e.menus.serialConnection.flags.options,value:e.menus.serialConnection.flags.default},on:{changedValue:function(t){return e.setSerialConnectionFlags(t)}}})],1)],1)],1)],1),n("v-container",[n("v-row",{staticClass:"ma-1",attrs:{justify:"center"}},[n("div",{staticClass:"text-button"},[e._v(" Log Mode ")])]),n("v-divider",{staticClass:"ma-2"}),n("HorizontalSelection",{attrs:{options:e.menus.logMode.options,value:e.optionData.logMode},on:{changedValue:function(t){e.optionData.logMode=t}}})],1),n("v-container",[n("v-row",{staticClass:"ma-1",attrs:{justify:"center"}},[n("div",{staticClass:"text-button"},[e._v(" Display Mode ")])]),n("v-divider",{staticClass:"ma-2"}),n("HorizontalSelection",{attrs:{options:e.menus.displayMode.options,value:e.optionData.displayMode},on:{changedValue:function(t){e.optionData.displayMode=t}}})],1),n("v-container",[n("v-row",{staticClass:"ma-1",attrs:{justify:"center"}},[n("v-spacer"),n("div",{staticClass:"text-button"},[e._v(" Expressions ")]),n("v-spacer"),n("v-btn",{attrs:{icon:"",small:""},on:{click:e.addNewExpression}},[n("v-icon",[e._v(" mdi-plus ")])],1)],1),n("ExpressionEditor",{ref:"expressionEditor",on:{snackbar:function(t){return e.sendSnackbar(t)}}}),n("v-divider",{staticClass:"ma-2"}),n("v-card",{directives:[{name:"bar",rawName:"v-bar"}],staticClass:"grey darken-3",staticStyle:{height:"300px"}},[n("v-list",[n("v-list-item-group",e._l(e.optionData.expressions,(function(t,a){return n("v-list-item",{key:a},[n("v-list-item-action",[n("v-checkbox",{attrs:{color:"grey darken-4"},model:{value:t.active,callback:function(n){e.$set(t,"active",n)},expression:"item.active"}})],1),n("v-list-item-content",{on:{click:function(n){return e.openExpressionEditor(t)}}},[n("v-list-item-title",{domProps:{textContent:e._s(t.name)}})],1),n("v-list-item-action",[n("v-menu",{attrs:{top:"","nudge-bottom":"105","nudge-left":"16","close-on-content-click":!1},scopedSlots:e._u([{key:"activator",fn:function(a){var o=a.on;return[n("v-btn",e._g({staticClass:"pa-3",attrs:{icon:"",color:t.color}},o),[n("v-icon",{attrs:{large:""}},[e._v(" mdi-label ")])],1)]}}],null,!0),model:{value:t.colorEdit,callback:function(n){e.$set(t,"colorEdit",n)},expression:"item.colorEdit"}},[n("v-card",[n("v-card-text",{staticClass:"pa-0"},[n("v-color-picker",{attrs:{flat:""},model:{value:t.color,callback:function(n){e.$set(t,"color",n)},expression:"item.color"}})],1)],1)],1)],1)],1)})),1)],1)],1)],1)],1)},c=[],l=(n("4160"),n("07ac"),n("4d63"),n("ac1f"),n("25f0"),n("159b"),n("dca8"),Object.freeze({ASCII:0,HEX:1,BINARY:2})),u=l,d=Object.freeze({TERMINAL:0,CHAT:1}),p=d,m=Object.freeze({RTSCTS:"rtscts",XON:"xon",XOFF:"xoff",XANY:"xany"}),v=m,f=Object.freeze({Error:{NoWebSerial:{color:"error",content:"Your browser doesn't seem to have the WebSerial API enabled. Please check if your browser supports it. The 'enable' button will lead you to the instructions to activate it on Chrome.",buttons:[{text:"Enable",callback:function(){window.location.href="https://codelabs.developers.google.com/codelabs/web-serial/#2"}}],timeout:-1},NoTextDecoderStream:{color:"error",content:"Your browser doesn't seem to have the TextDecoderStream class. Maybe check on its documentation?",timeout:-1},NoTextEncoderStream:{color:"error",content:"Your browser doesn't seem to have the TextEncoderStream class. Maybe check on its documentation?",timeout:-1},NoPortSelected:{color:"error",content:"No serial port selected. Connection stopped.",timeout:2e3},ConnectionFailed:{color:"error",content:"Your serial connection failed somehow. Please try again.",timeout:3e3},InvalidRegExp:{color:"error",content:"There seemed to be something wrong with your RegExp. It's now back to the default.",timeout:3e3},Custom:function(e){return{color:"error",content:e,timeout:-1}}},Success:{SerialConnectionOpened:{color:"success",content:"Successfully opened a serial connection!",timeout:2e3}},Warning:{SerialConnectionClosed:{color:"warning",content:"The serial connection was closed.",timeout:5e3},NoRegexSlashes:{color:"warning",content:"Hmm... Did you write your regex with '/' and flags? Those will be treated as actual characters, as you only need to write the regex content. The default flags are 'gms'.",timeout:5e3}}}),h=f,g=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-row",{class:[e.dense?"ma-0":"ma-3"],attrs:{justify:"center"}},e._l(e.options,(function(t){return n("v-btn",{key:t.val,class:[e.isOptionActive(t.val)?"grey darken-2":void 0,e.dense?"pa-1":void 0],attrs:{tile:""},on:{click:function(n){return e.changeValue(t.val)}}},[e._v(" "+e._s(t.name)+" ")])})),1)},b=[],x=(n("4de4"),n("c975"),{name:"HorizontalSelection",data:function(){return{activeValue:null}},mounted:function(){this.activeValue=this.value},props:["options","value"],methods:{changeValue:function(e){if(this.multiple)return this.isOptionActive(e)?this.activeValue=this.activeValue.filter((function(t){return t!==e})):this.activeValue.push(e),void this.$emit("changedValue",this.activeValue);this.$emit("changedValue",e)},isOptionActive:function(e){return this.multiple?this.activeValue&&-1!==this.activeValue.indexOf(e):this.value===e}},computed:{multiple:function(){return void 0!==this.$attrs.multiple},dense:function(){return void 0!==this.$attrs.dense}}}),C=x,S=n("2877"),w=n("6544"),y=n.n(w),k=n("8336"),E=n("0fd9"),M=Object(S["a"])(C,g,b,!1,null,null,null),T=M.exports;y()(M,{VBtn:k["a"],VRow:E["a"]});var D=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-dialog",{attrs:{persistent:"","max-width":"300px"},model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[n("v-card",[n("v-card-title",[n("span",{staticClass:"headline"},[e._v("Expression Editor")])]),n("v-card-text",[n("v-container",[n("v-row",{attrs:{align:"center"}},[n("v-col",{attrs:{cols:"8"}},[n("v-text-field",{attrs:{label:"Name",required:""},model:{value:e.expression.name,callback:function(t){e.$set(e.expression,"name",t)},expression:"expression.name"}})],1),n("v-col",{attrs:{cols:"12"}},[n("v-text-field",{attrs:{label:"RegEx",required:""},model:{value:e.expressionField,callback:function(t){e.expressionField=t},expression:"expressionField"}})],1)],1)],1)],1),n("v-card-actions",[n("v-spacer"),n("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:function(t){return e.closeDialog(!1)}}},[e._v("Close")]),n("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:function(t){return e.closeDialog(!0)}}},[e._v("Save")])],1)],1)],1)},V=[],O=(n("fb6a"),n("d3b7"),n("baa5"),"gimusy"),_="gms",R="a^";function I(e){var t=e.indexOf("/"),n=e.lastIndexOf("/");return-1!==t&&-1!==n&&t!==n&&e.length-n-1<=O.length}var A={name:"ExpressionEditor",data:function(){return{dialog:!1,expression:{name:"",expression:""},expressionField:""}},methods:{openDialog:function(e){this.dialog=!0,this.expression=e,this.previousExpression=Object.assign({},e),this.expressionField=this.expression.expression.toString().slice(1,-1)},closeDialog:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!e)return Object.assign(this.expression,this.previousExpression),void(this.dialog=!1);try{I(this.expressionField)&&this.$emit("snackbar",h.Warning.NoRegexSlashes),this.expression.expression=new RegExp(this.expressionField,"")}catch(t){this.$emit("snackbar",h.Error.InvalidRegExp),this.expression.expression=new RegExp(R,"")}this.dialog=!1}}},N=A,j=n("b0af"),B=n("99d9"),$=n("62ad"),F=n("a523"),z=n("169a"),L=n("2fa4"),P=n("8654"),H=Object(S["a"])(N,D,V,!1,null,null,null),W=H.exports;y()(H,{VBtn:k["a"],VCard:j["a"],VCardActions:B["a"],VCardText:B["c"],VCardTitle:B["d"],VCol:$["a"],VContainer:F["a"],VDialog:z["a"],VRow:E["a"],VSpacer:L["a"],VTextField:P["a"]});var X={name:"NavigationDrawer",props:["active","optionData"],components:{HorizontalSelection:T,ExpressionEditor:W},data:function(){return{drawer:!0,menus:{serialConnection:{baudrate:{suggestions:[115200,57600,38400,19200,9600,4800,2400,1800,1200,600,300,200,150,134,110,75,50]},databits:{options:[8,7,6,5]},stopbits:{options:[1,2]},parityType:{options:["none","even","odd","mark","space"]},flags:{options:[{name:"RTSCTS",val:v.RTSCTS},{name:"XON",val:v.XON},{name:"XOFF",val:v.XOFF},{name:"XANY",val:v.XANY}],default:[]},loading:!1},logMode:{options:[{name:"TERMINAL",val:p.TERMINAL},{name:"CHAT",val:p.CHAT}]},displayMode:{options:[{name:"ASCII",val:u.ASCII},{name:"HEX",val:u.HEX},{name:"BINARY",val:u.BINARY}]},expressions:{count:0,editing:!1}}}},mounted:function(){var e=this;this.drawer=this.active,"serial"in navigator&&(navigator.serial.onconnect=function(){e.menus.serialConnection.loading=!1,e.sendSnackbar(h.Success.SerialConnectionOpened),e.$emit("serialConnected")},navigator.serial.ondisconnect=function(){e.menus.serialConnection.loading=!1,e.sendSnackbar(h.Warning.SerialConnectionClosed),e.$emit("serialDisconnected")})},computed:{serialConnectionButtonText:function(){return this.optionData.serialConnection.port?"Close":"Go!"}},methods:{toggleSerialConnection:function(){var e=Object(r["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(this.menus.serialConnection.loading=!0,this.optionData.serialConnection.port){e.next=6;break}return e.next=4,this.openSerialConnection();case 4:e.next=8;break;case 6:return e.next=8,this.closeSerialConnection();case 8:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),openSerialConnection:function(){var e=Object(r["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t=null,e.prev=1,e.next=4,navigator.serial.requestPort();case 4:t=e.sent,e.next=12;break;case 7:return e.prev=7,e.t0=e["catch"](1),this.sendSnackbar(h.Error.Custom("Serial port request error: ".concat(e.t0))),this.menus.serialConnection.loading=!1,e.abrupt("return");case 12:if(t){e.next=16;break}return this.sendSnackbar(h.Error.NoPortSelected),this.menus.serialConnection.loading=!1,e.abrupt("return");case 16:return this.optionData.serialConnection.port=t,e.prev=17,e.next=20,t.open(this.optionData.serialConnection.serialOptions);case 20:e.next=27;break;case 22:return e.prev=22,e.t1=e["catch"](17),this.sendSnackbar(h.Error.Custom("Serial port opening error: ".concat(e.t1))),this.menus.serialConnection.loading=!1,e.abrupt("return");case 27:this.menus.serialConnection.loading=!1,this.sendSnackbar(h.Success.SerialConnectionOpened),this.$emit("serialConnected");case 30:case"end":return e.stop()}}),e,this,[[1,7],[17,22]])})));function t(){return e.apply(this,arguments)}return t}(),closeSerialConnection:function(){this.menus.serialConnection.loading=!1,this.$emit("serialDisconnected")},setSerialConnectionFlags:function(e){var t=this;Object.values(v).forEach((function(e){t.optionData.serialConnection.serialOptions[e]=!1})),e.forEach((function(e){t.optionData.serialConnection.serialOptions[e]=!0}))},toggle:function(){this.drawer=!this.drawer},addNewExpression:function(){this.optionData.expressions.push({name:"Expression ".concat(this.menus.expressions.count++),active:!1,expression:new RegExp(R,""),color:"#ffffff",colorEdit:!1})},openExpressionEditor:function(e){this.$refs.expressionEditor.openDialog(e)},sendSnackbar:function(e){this.$emit("snackbar",e)}}},Y=X,U=(n("545c"),n("c6a6")),q=n("ac7c"),K=n("03a4"),G=n("ce7e"),J=n("cd55"),Q=n("49e2"),Z=n("c865"),ee=n("0393"),te=n("132d"),ne=n("8860"),ae=n("da13"),oe=n("1800"),ie=n("5d23"),re=n("1baa"),se=n("e449"),ce=n("f774"),le=n("b974"),ue=Object(S["a"])(Y,s,c,!1,null,null,null),de=ue.exports;y()(ue,{VAutocomplete:U["a"],VBtn:k["a"],VCard:j["a"],VCardText:B["c"],VCheckbox:q["a"],VCol:$["a"],VColorPicker:K["a"],VContainer:F["a"],VDivider:G["a"],VExpansionPanel:J["a"],VExpansionPanelContent:Q["a"],VExpansionPanelHeader:Z["a"],VExpansionPanels:ee["a"],VIcon:te["a"],VList:ne["a"],VListItem:ae["a"],VListItemAction:oe["a"],VListItemContent:ie["a"],VListItemGroup:re["a"],VListItemTitle:ie["b"],VMenu:se["a"],VNavigationDrawer:ce["a"],VRow:E["a"],VSelect:le["a"],VSpacer:L["a"],VTextField:P["a"]});var pe=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-container",{staticStyle:{"background-color":"#363636",height:"calc(100% - 150px)"},attrs:{id:"chatContainer"}},[n("v-card",{style:{backgroundColor:e.chatBackgroundColor,transition:"0.2s ease-in-out background-color"},attrs:{outlined:""}},[n("DynamicScroller",{ref:"scroller",staticClass:"scroller",attrs:{items:e.messages,"min-item-size":24,buffer:300,emitUpdate:!0},on:{resize:e.scrollToBottom,update:e.scrollerUpdate},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.item,o=t.index,i=t.active;return[n("DynamicScrollerItem",{attrs:{item:a,active:i,"data-active":i,"data-index":o,"size-dependencies":[a.content]}},[n("SerialChatMessage",{attrs:{id:a.id,time:a.time,content:a.content,author:a.author,logMode:e.logMode,expressions:e.activeExpressions,displayFunction:e.displayFunction}})],1)]}}])})],1)],1)},me=[],ve=(n("99af"),n("d81d"),function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"monitor-entry",on:{mouseover:function(t){e.showButton=!0},mouseleave:function(t){e.showButton=!1}}},[n("v-btn",{directives:[{name:"show",rawName:"v-show",value:e.showButton,expression:"showButton"}],staticClass:"message-button",attrs:{icon:"","x-small":""},on:{click:e.copyContent}},[n("v-icon",{attrs:{small:""}},[e._v(" mdi-content-copy ")])],1),e.logMode===e.LogMode.CHAT?n("div",[n("v-card",{staticStyle:{"font-family":"monospace"},attrs:{id:"msg-"+e.id,dense:"",color:e.colors[e.author],elevation:2}},[n("div",[n("v-card-subtitle",{staticClass:"ma-0 pa-2 pb-0 offwhite-text"},[e._v(" "+e._s(e.time)+" ")])],1),n("v-card-text",{staticClass:"pa-0 pd-1 pl-2 mt-0 offwhite-text",domProps:{innerHTML:e._s(e.regexMarkedContent)}})],1),n("div",{staticStyle:{height:"10px"}})],1):e.logMode===e.LogMode.TERMINAL?n("span",{staticStyle:{"font-family":"monospace"},attrs:{id:"msg-"+e.id}},[n("span",{class:[e.colors[e.author]],staticStyle:{"border-radius":"5px"}},[e._v(">>")]),e._v(" "+e._s(e.time)+" - "),n("span",{domProps:{innerHTML:e._s(e.regexMarkedContent)}}),n("br")]):e._e()],1)}),fe=[];n("5319"),n("a630"),n("a15b"),n("3ca3"),n("466d"),n("4d90");function he(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return" ".concat(e.charCodeAt(0).toString(t).padStart(n,"0"))}var ge=/^[ -~]+$/,be=["NUL","SOH","STX","ETX","EOT","ENQ","ACK","BEL","BS","HT","LF","VT","FF","CR","SO","SI","DLE","DC1","DC2","DC3","DC4","NAK","SYN","ETB","CAN","EM","SUB","ESC","FS","GS","RS","US"],xe=be.map((function(e){return'<span style="color: yellow">&lt;'.concat(e,"&gt;</span>")}));function Ce(e){return xe[e.charCodeAt(0)]||"□"}var Se=function(e){return e.match(ge)?e:Ce(e)},we=function(e){return he(e,16,2)},ye=function(e){return he(e,2,8)};function ke(e,t){return Array.from(e).map(t).join("")}var Ee=n("0665"),Me=n.n(Ee),Te=Object.freeze({self:"primary",serial:"secondary"}),De={name:"SerialChatMessage",props:["id","content","time","author","logMode","expressions","displayFunction"],data:function(){return{colors:Te,LogMode:p,showButton:!1}},computed:{regexMarkedContent:function(){return new Me.a(this.expressions,_).replace(this.content)},rawContent:function(){return this.displayFunction===Se?this.content:ke(this.content,this.displayFunction)}},methods:{copyContent:function(){var e=document.createElement("textarea");document.getElementById("msg-".concat(this.id)).appendChild(e),e.value=this.rawContent,e.select(),e.setSelectionRange(0,99999),document.execCommand("copy"),e.remove()}}},Ve=De,Oe=(n("0eac"),Object(S["a"])(Ve,ve,fe,!1,null,"4e313026",null)),_e=Oe.exports;y()(Oe,{VBtn:k["a"],VCard:j["a"],VCardSubtitle:B["b"],VCardText:B["c"],VIcon:te["a"]});var Re={name:"SerialChat",props:["logMode","displayMode","messageBufferSize","expressions"],components:{SerialChatMessage:_e},data:function(){return{messages:[],msgIdCount:0,lastScrollPosition:0,lastScrollMessageIndex:0,lastSentMessage:{self:{index:0,id:0,time:0},serial:{index:0,id:0,time:0}},testing:!1}},computed:{activeExpressions:function(){var e=this,t=this.expressions.filter((function(e){return e.active})).map((function(t){return[t.expression,function(n){return'<span style="background-color: '.concat(t.color,'">').concat(ke(n,e.displayFunction),"</span>")}]}));return t.push([/[\s\S]/gm,function(t){return ke(t,e.displayFunction)}]),t},displayFunction:function(){return this.displayMode===u.ASCII?Se:this.displayMode===u.HEX?we:ye},chatBackgroundColor:function(){return this.logMode===p.CHAT?"transparent":"#000000b0"}},watch:{logMode:function(){this.scrollToCurrentMessage(),this.$refs.scroller.forceUpdate(!0)},displayMode:function(){this.scrollToCurrentMessage(),this.$refs.scroller.forceUpdate(!0)}},methods:{addEntry:function(e,t){var n=Date.now()-this.lastSentMessage[t].time,a=this.lastSentMessage[t];if(n<500){var o=this.messageIndexSearch(a.id,a.index);this.messages[o].content+=e,a.time=Date.now()}else{this.messages.push({id:this.msgIdCount++,time:this.getCurrentTime(),content:e,author:t});while(this.messages.length>this.messageBufferSize)this.messages.shift();this.lastSentMessage[t]={id:this.msgIdCount-1,index:this.messages.length-1,time:Date.now()}}this.lastScrollMessageIndex>=this.messages.length-5&&setTimeout(this.scrollToBottom.bind(this),100)},scrollToBottom:function(){this.$refs.scroller.scrollToBottom()},getCurrentTime:function(){var e=new Date;return"[".concat(e.toLocaleDateString()," - ").concat(e.toLocaleTimeString(),"]")},scrollToCurrentMessage:function(){this.$refs.scroller.scrollToItem(this.lastScrollMessageIndex)},messageIndexSearch:function(e,t){for(var n=t;n>=0;n--)if(this.messages[n].id===e)return n},scrollerUpdate:function(e,t){this.lastScrollMessageIndex=t}},mounted:function(){var e=function(){var e=document.querySelector(".scroller"),t=document.querySelector("#chatContainer"),n=getComputedStyle(t).height;e.style.height="".concat(.9*parseFloat(n,10),"px")};e(),window.addEventListener("resize",e)}},Ie=Re,Ae=Object(S["a"])(Ie,pe,me,!1,null,null,null),Ne=Ae.exports;y()(Ae,{VCard:j["a"],VContainer:F["a"]});var je=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-container",{staticClass:"grey darken-3",staticStyle:{height:"150px"}},[n("v-row",{attrs:{align:"center"}},[n("v-textarea",{staticClass:"pl-2",attrs:{outlined:"","hide-details":"",autocomplete:"off",height:"130px"},on:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")||t.ctrlKey||t.shiftKey||t.altKey||t.metaKey?null:e.sendMessage(t)}},model:{value:e.message,callback:function(t){e.message=t},expression:"message"}}),n("v-btn",{attrs:{icon:"",color:"primary","x-large":""},on:{click:e.sendMessage}},[n("v-icon",[e._v(" mdi-send ")])],1)],1)],1)},Be=[],$e=n("4f25"),Fe=n.n($e),ze={name:"SerialInput",data:function(){return{message:""}},methods:{sendMessage:function(){this.message&&(this.$emit("sendMessage",Fe()(this.message)),this.message="")}}},Le=ze,Pe=n("a844"),He=Object(S["a"])(Le,je,Be,!1,null,null,null),We=He.exports;y()(He,{VBtn:k["a"],VContainer:F["a"],VIcon:te["a"],VRow:E["a"],VTextarea:Pe["a"]});var Xe=function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.content?n("v-snackbar",{attrs:{top:"",color:e.content.color,timeout:e.content.timeout},model:{value:e.isOn,callback:function(t){e.isOn=t},expression:"isOn"}},[e._v(" "+e._s(e.content.content)+" "),e._l(e.content.buttons,(function(t,a){return n("v-btn",{key:a,attrs:{text:""},on:{click:t.callback}},[e._v(" "+e._s(t.text)+" ")])})),n("v-btn",{attrs:{text:""},on:{click:e.close}},[e._v(" Close ")])],2):e._e()},Ye=[],Ue={name:"Snackbar",data:function(){return{isOn:!1,content:null,closeTimeout:null}},methods:{setMessage:function(e){var t=this;this.isOn&&this.close(),this.isOn=!0,this.content=e,-1!==e.timeout&&(this.closeTimeout=setTimeout((function(){t.close()}),e.timeout))},close:function(){this.closeTimeout&&(clearTimeout(this.closeTimeout),this.closeTimeout=null),this.isOn=!1,this.content=null}}},qe=Ue,Ke=n("2db4"),Ge=Object(S["a"])(qe,Xe,Ye,!1,null,null,null),Je=Ge.exports;y()(Ge,{VBtn:k["a"],VSnackbar:Ke["a"]});var Qe={name:"App",components:{NavigationDrawer:de,SerialChat:Ne,SerialInput:We,Snackbar:Je},mounted:function(){"serial"in navigator?"TextDecoderStream"in window?"TextEncoderStream"in window||this.setSnackbarMessage(h.Error.NoTextEncoderStream):this.setSnackbarMessage(h.Error.NoTextDecoderStream):this.setSnackbarMessage(h.Error.NoWebSerial)},data:function(){return{snackbarMessage:null,showAsTerminal:!1,serialWriterClosed:null,serialReaderClosed:null,serialWriter:null,serialReader:null,navigationDrawer:{active:!0,optionData:{logMode:p.CHAT,displayMode:u.ASCII,serialConnection:{port:null,serialOptions:{baudrate:null,databits:8,stopbits:1,parity:"none",buffersize:255,rtscts:!1,xon:!1,xoff:!1,xany:!1}},expressions:[]}}}},methods:{sendMessage:function(e){this.$refs.chat.addEntry(e,"self"),this.serialWriter&&this.serialWriter.write(e)},setSnackbarMessage:function(e){this.$refs.snackbar.setMessage(e)},toggleDrawer:function(){this.$refs.drawer.toggle()},openSerial:function(){var e=this.navigationDrawer.optionData.serialConnection.port;e&&e.readable&&e.writable?(this.initializeReader(e),this.initializeWriter(e)):this.setSnackbarMessage(h.Error.ConnectionFailed)},initializeReader:function(e){var t=new window.TextDecoderStream("ascii");this.serialReaderClosed=e.readable.pipeTo(t.writable),this.serialReader=t.readable.getReader(),this.readSerial()},initializeWriter:function(e){var t=new window.TextEncoderStream;this.serialWriterClosed=t.readable.pipeTo(e.writable),this.serialWriter=t.writable.getWriter()},closeSerial:function(){var e=this;return Object(r["a"])(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(n=e.navigationDrawer.optionData.serialConnection.port,!e.serialWriter){t.next=5;break}return e.serialWriter.close(),t.next=5,e.writableStreamClosed;case 5:if(!e.serialReader){t.next=9;break}return e.serialReader.cancel(),t.next=9,e.serialReaderClosed.catch((function(){}));case 9:if(!n){t.next=12;break}return t.next=12,n.close();case 12:e.serialReader=null,e.serialWriter=null,e.serialReaderClosed=null,e.serialWriterClosed=null,e.navigationDrawer.optionData.serialConnection.port=null;case 17:case"end":return t.stop()}}),t)})))()},readSerial:function(){var e=this;return Object(r["a"])(regeneratorRuntime.mark((function t(){var n,a,o;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.serialReader.read();case 2:if(n=t.sent,a=n.value,o=n.done,!o){t.next=7;break}return t.abrupt("break",10);case 7:e.$refs.chat.addEntry(a,"serial");case 8:t.next=0;break;case 10:e.serialReader.releaseLock();case 11:case"end":return t.stop()}}),t)})))()}}},Ze=Qe,et=n("7496"),tt=n("40dc"),nt=n("5bc1"),at=n("f6c4"),ot=Object(S["a"])(Ze,o,i,!1,null,null,null),it=ot.exports;y()(ot,{VApp:et["a"],VAppBar:tt["a"],VAppBarNavIcon:nt["a"],VMain:at["a"],VSpacer:L["a"]});var rt=n("f309");a["a"].use(rt["a"]);var st=new rt["a"]({theme:{dark:!0}}),ct=(n("a899"),n("e508")),lt=n("ae1a"),ut=n.n(lt);a["a"].use(ct["a"]),a["a"].use(ut.a),a["a"].config.productionTip=!1,new a["a"]({vuetify:st,render:function(e){return e(it)}}).$mount("#app")},8314:function(e,t,n){},c8bf:function(e,t,n){}});
//# sourceMappingURL=app.9464a0f4.js.map